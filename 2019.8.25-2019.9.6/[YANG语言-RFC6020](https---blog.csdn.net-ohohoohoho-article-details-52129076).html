<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>[YANG语言-RFC6020](https://blog.csdn.net/ohohoohoho/article/details/52129076)</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="q04p" id="yang语言-rfc6020"><a href="https://blog.csdn.net/ohohoohoho/article/details/52129076" target="_blank">YANG语言-RFC6020</a></h1><p data-anchor-id="1dl9"><code>实验</code></p><hr><p data-anchor-id="2b2y">1、简介</p><ul data-anchor-id="dsgd">
<li><p>YANG是一种被用来为NETCONF协议建模的语言。一个YANG module定义了具有垂直结构的数据，这些数据可以被用做基于NETCONF的operations，比如configuration，state date，RPCs，以及notifications。</p></li>
<li><p>YANG使用modules和submodule进行数据建模。一个module能够从其他外部的modules中导入数据，也可以从submodules中包含数据。“include”声明允许一个module或者submodule引用submodules中定义的数据；“import”声明允许引用其他modules中定义的数据。</p></li>
<li><p>YANG modules可以被转换为等价的XML格式，称为YANG Independent Notation（YIN）</p></li>
<li><p>特点：可扩展</p></li>
</ul><p data-anchor-id="oeey">2、module包含的三种类型声明：</p><ul data-anchor-id="vdbk">
<li>module-header statement（模块头声明）：描述了该module，给出了module相关的信息。</li>
<li>revision statement（版本声明）：描述了该module的历史信息。</li>
<li>definition statement（定义声明）：定义了数据模型的内容部分。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="g727"><ol class="linenums"><li class="L0"><code><span class="kwd">module</span><span class="pln"> name</span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">  yang</span><span class="pun">-</span><span class="pln">version </span><span class="lit">1</span><span class="pun">;</span><span class="com">//一般均为1</span></code></li><li class="L2"><code><span class="pln">  </span><span class="kwd">namespace</span><span class="pln"> </span><span class="str">"urn:opendaylight:defenderplugin"</span><span class="pun">;</span><span class="com">//私有module可以随意起命名空间，尽量不要与标准命名空间冲突</span></code></li><li class="L3"><code><span class="pln">  prefix </span><span class="str">"defender"</span><span class="pun">;</span><span class="com">//别的模块引用时会加上前缀</span></code></li><li class="L4"><code></code></li><li class="L5"><code><span class="pln">  revision </span><span class="str">"2015-01-05"</span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">    description </span><span class="str">"initial revision of defenfer model"</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ccar">3、YANG定义了四种用于数据建模的节点类型</p><ul data-anchor-id="zym5">
<li>leaf node包含了像integer或者string这样的简单数据。它有且仅有一个特定类型的值，并且没有子节点。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4ayo"><ol class="linenums"><li class="L0"><code><span class="pln">leaf host</span><span class="pun">-</span><span class="pln">name </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">  type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">  description </span><span class="str">"Hostname for this system"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="kntp"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;host-name&gt;</span><span class="pln">my.example.com</span><span class="tag">&lt;/host-name&gt;</span></code></li></ol></pre><ul data-anchor-id="o20w">
<li>leaf-list是一系列的leaf nodes，每个leaf都有特定类型的值。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="fhnx"><ol class="linenums"><li class="L0"><code><span class="pln">leaf</span><span class="pun">-</span><span class="pln">list domain</span><span class="pun">-</span><span class="pln">search </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">  type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">  description </span><span class="str">"List of domain names to search"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="fduk"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;domain-search&gt;</span><span class="pln">high.example.com</span><span class="tag">&lt;/domain-search&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;domain-search&gt;</span><span class="pln">low.example.com</span><span class="tag">&lt;/domain-search&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;domain-search&gt;</span><span class="pln">everywhere.example.com</span><span class="tag">&lt;/domain-search&gt;</span></code></li></ol></pre><ul data-anchor-id="uq5d">
<li>container node用来将相关的节点归总到一个subtree中。一个container node只有子节点，没有值。一个container可能会包含任何类型的任何数量的子节点（包括leafs，lists，leaf-lists以及containers）。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="sxx5"><ol class="linenums"><li class="L0"><code><span class="pln">container system </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">  container login </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    leaf message </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">      type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">      description </span><span class="str">"Message given at start of login session"</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">  </span><span class="pun">}</span><span class="pln"> </span></code></li><li class="L7"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ngn6"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="pln">  </span><span class="tag">&lt;system&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;login&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;message&gt;</span><span class="pln">Good morning</span><span class="tag">&lt;/message&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;/login&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/system&gt;</span></code></li></ol></pre><ul data-anchor-id="hs5d">
<li>List定义了一系列的列表项（list entries）。每个列表项都像是一个structure或者一个record instance，通过名为“key”的leaf的值唯一确定。一个list能定义多种key leafs，能够包含任意类型的任意数目的子节点（包括leafs，lists，containers）。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="slaw"><ol class="linenums"><li class="L0"><code><span class="pln"> list user </span><span class="pun">{</span><span class="com">//类似结构体</span></code></li><li class="L1"><code><span class="pln">     key </span><span class="str">"name"</span><span class="pun">;</span><span class="pln"> </span><span class="com">//类似主键</span></code></li><li class="L2"><code><span class="pln">     leaf name </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">         type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">     leaf full</span><span class="pun">-</span><span class="pln">name </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">         type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L7"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">     leaf </span><span class="kwd">class</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">         type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L0"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="hmk4"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;user&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;name&gt;</span><span class="pln">glocks</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;full-name&gt;</span><span class="pln">Goldie Locks</span><span class="tag">&lt;/full-name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;class&gt;</span><span class="pln">intruder</span><span class="tag">&lt;/class&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/user&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;user&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;name&gt;</span><span class="pln">snowey</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;full-name&gt;</span><span class="pln">Snow White</span><span class="tag">&lt;/full-name&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;class&gt;</span><span class="pln">free-loader</span><span class="tag">&lt;/class&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/user&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;user&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;name&gt;</span><span class="pln">rzell</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;full-name&gt;</span><span class="pln">Rapun Zell</span><span class="tag">&lt;/full-name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;class&gt;</span><span class="pln">tower</span><span class="tag">&lt;/class&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/user&gt;</span></code></li></ol></pre><ul data-anchor-id="oqvy">
<li>基本数据类型：leaf节点可以直接使用的。</li>
</ul><table data-anchor-id="q2m7" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th style="text-align:center;">Name</th>
 <th style="text-align:center;">Description</th>
</tr>
</thead>
<tbody><tr>
 <td style="text-align:center;">binary</td>
 <td style="text-align:center;">Any binary data</td>
</tr>
<tr>
 <td style="text-align:center;">bits</td>
 <td style="text-align:center;">A set of bits or flags</td>
</tr>
<tr>
 <td style="text-align:center;">boolean</td>
 <td style="text-align:center;">"true" or "false"</td>
</tr>
<tr>
 <td style="text-align:center;">decimal64</td>
 <td style="text-align:center;">64-bit signed decimal number</td>
</tr>
<tr>
 <td style="text-align:center;">empty</td>
 <td style="text-align:center;">A leaf that does not have any value</td>
</tr>
<tr>
 <td style="text-align:center;">enumeration</td>
 <td style="text-align:center;">Enumerated strings</td>
</tr>
<tr>
 <td style="text-align:center;">identityref</td>
 <td style="text-align:center;">A reference to an abstract identity</td>
</tr>
<tr>
 <td style="text-align:center;">instance-identifier</td>
 <td style="text-align:center;">References a data tree node</td>
</tr>
<tr>
 <td style="text-align:center;">int8</td>
 <td style="text-align:center;">8-bit signed integer</td>
</tr>
<tr>
 <td style="text-align:center;">int16</td>
 <td style="text-align:center;">16-bit signed integer</td>
</tr>
<tr>
 <td style="text-align:center;">int32</td>
 <td style="text-align:center;">32-bit signed integer</td>
</tr>
<tr>
 <td style="text-align:center;">int64</td>
 <td style="text-align:center;">64-bit signed integer</td>
</tr>
<tr>
 <td style="text-align:center;">leafref</td>
 <td style="text-align:center;">A reference to a leaf instance</td>
</tr>
<tr>
 <td style="text-align:center;">string</td>
 <td style="text-align:center;">Human-readable string</td>
</tr>
<tr>
 <td style="text-align:center;">uint8</td>
 <td style="text-align:center;">8-bit unsigned integer</td>
</tr>
<tr>
 <td style="text-align:center;">uint16</td>
 <td style="text-align:center;">16-bit unsigned integer</td>
</tr>
<tr>
 <td style="text-align:center;">uint32</td>
 <td style="text-align:center;">32-bit unsigned integer</td>
</tr>
<tr>
 <td style="text-align:center;">uint64</td>
 <td style="text-align:center;">64-bit unsigned integer</td>
</tr>
<tr>
 <td style="text-align:center;">union</td>
 <td style="text-align:center;">Choice of member types</td>
</tr>
</tbody></table><ul data-anchor-id="ucob">
<li>可以使用“typedef”自定义</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="lo7e"><ol class="linenums"><li class="L0"><code><span class="kwd">typedef</span><span class="pln"> percent </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">     type uint8 </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">         range </span><span class="str">"0 .. 100"</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pln">     description </span><span class="str">"Percentage"</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln"> </span><span class="pun">}</span></code></li><li class="L6"><code></code></li><li class="L7"><code><span class="pln"> leaf completed </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">     type percent</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="f7l1"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;completed&gt;</span><span class="pln">20</span><span class="tag">&lt;/completed&gt;</span></code></li></ol></pre><p data-anchor-id="7gih">4、数据类型(对应Netconf协议中的数据类型) <br>
Netconf中存在两种数据类型：<strong>状态数据(state data)</strong>和<strong>配置数据(configuration data)</strong>。详见<a href="https://blog.csdn.net/anzheangel/article/details/78885880" target="_blank">Netconf协议</a>。</p><ul data-anchor-id="fbep">
<li>状态数据：设备运行时的数据，即系统自动生成，直接获取的数据。需要使用get()方法获取。yang中使用config false语句表示，不表示则为配置数据；</li>
<li><p>配置数据：用户以某种方式配置到设备上的数据，需要使用get-config()、edit-config()等方法获取、编辑。</p></li>
<li><p>使用“grouping”声明将一组节点放到可重用的集合中去。一个grouping定义了节点的集合，该集合可以使用“uses”声明实例化。 <br>
(1)先使用“grouping”声明：</p></li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="37i7"><ol class="linenums"><li class="L0"><code><span class="pln">grouping target </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L1"><code><span class="pln">    leaf address </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L2"><code><span class="pln">        type inet</span><span class="pun">:</span><span class="pln">ip</span><span class="pun">-</span><span class="pln">address</span><span class="pun">;</span><span class="pln"> </span></code></li><li class="L3"><code><span class="pln">        description </span><span class="pun">“</span><span class="typ">Target</span><span class="pln"> IP address</span><span class="pun">”;</span><span class="pln"> </span></code></li><li class="L4"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span></code></li><li class="L5"><code><span class="pln">    leaf port </span><span class="pun">{</span><span class="pln"> </span></code></li><li class="L6"><code><span class="pln">        type inet</span><span class="pun">:</span><span class="pln">port</span><span class="pun">-</span><span class="pln">number</span><span class="pun">;</span><span class="pln"> </span></code></li><li class="L7"><code><span class="pln">        description </span><span class="pun">“</span><span class="typ">Target</span><span class="pln"> port number</span><span class="pun">”;</span><span class="pln"> </span></code></li><li class="L8"><code><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span></code></li><li class="L9"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="bcet">(2)然后使用“uses”实例化：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="mpm5"><ol class="linenums"><li class="L0"><code><span class="pln"> container peer </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">     container destination </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">         uses target</span><span class="pun">;</span></code></li><li class="L3"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L4"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dzsw"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;peer&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;destination&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;address&gt;</span><span class="pln">192.0.2.1</span><span class="tag">&lt;/address&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;port&gt;</span><span class="pln">830</span><span class="tag">&lt;/port&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;/destination&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/peer&gt;</span></code></li></ol></pre><ul data-anchor-id="0547">
<li>使用“choice”和“case”声明分离互不相容，不能同时出现的节点。“choice”声明包含了多个“case”声明，定义了不能同时出现的schema nodes的集合。每个“case”声明都可能包含多个节点，但是每个节点都应该只在一个“case”中出现当一个case元素被创建，其他所有cases的元素都会被隐式删除。设备要强制执行这个约束，以防止出现配置的不协调。 <br>
“choice”和“case”节点只会出现在schema tree中，不能出现在data tree或者NETCONF message。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="uj5p"><ol class="linenums"><li class="L0"><code><span class="pln">container food </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">   choice snack </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">       </span><span class="kwd">case</span><span class="pln"> sports</span><span class="pun">-</span><span class="pln">arena </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">           leaf pretzel </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">               type empty</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">           </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">           leaf beer </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">               type empty</span><span class="pun">;</span></code></li><li class="L8"><code><span class="pln">           </span><span class="pun">}</span></code></li><li class="L9"><code><span class="pln">       </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">       </span><span class="kwd">case</span><span class="pln"> late</span><span class="pun">-</span><span class="pln">night </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">           leaf chocolate </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">               type enumeration </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">                   </span><span class="kwd">enum</span><span class="pln"> dark</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">                   </span><span class="kwd">enum</span><span class="pln"> milk</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">                   </span><span class="kwd">enum</span><span class="pln"> first</span><span class="pun">-</span><span class="pln">available</span><span class="pun">;</span></code></li><li class="L6"><code><span class="pln">               </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pln">           </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">       </span><span class="pun">}</span></code></li><li class="L9"><code><span class="pln">   </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="gqct"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;food&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;pretzel/&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;beer/&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/food&gt;</span></code></li></ol></pre><ul data-anchor-id="7fna">
<li>YANG允许一个模块将额外的节点插入到数据模型中，包括当前的module（以及它的submodule）或者一个外部的module。“augment”声明定义了在数据模型树形结构中，新的节点插入的位置。“when”声明了新节点生效的时间。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="d7cg"><ol class="linenums"><li class="L0"><code><span class="pln">augment </span><span class="pun">/</span><span class="pln">system</span><span class="pun">/</span><span class="pln">login</span><span class="pun">/</span><span class="pln">user </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">     </span><span class="kwd">when</span><span class="pln"> </span><span class="str">"class != 'wheel'"</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">     leaf uid </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">         type uint16 </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">             range </span><span class="str">"1000 .. 30000"</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">         </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><ul data-anchor-id="vsb4">
<li>YANG也能定义NETCONF中的RPCs。RPC中的operations’ name，输入参数，和输出参数都可以通过YANG的数据定义声明进行建模。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="3bgq"><ol class="linenums"><li class="L0"><code><span class="pln"> rpc activate</span><span class="pun">-</span><span class="pln">software</span><span class="pun">-</span><span class="pln">image </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">     input </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">         leaf image</span><span class="pun">-</span><span class="pln">name </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">             type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L4"><code><span class="pln">         </span><span class="pun">}</span></code></li><li class="L5"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">     output </span><span class="pun">{</span></code></li><li class="L7"><code><span class="pln">         leaf status </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">             type </span><span class="kwd">string</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">         </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L1"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="4xq3"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;rpc</span><span class="pln"> </span><span class="atn">message-id</span><span class="pun">=</span><span class="atv">"101"</span></code></li><li class="L1"><code class="language-xml"><span class="pln">      </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"urn:ietf:params:xml:ns:netconf:base:1.0"</span><span class="tag">&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;activate-software-image</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://acme.example.com/system"</span><span class="tag">&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;image-name&gt;</span><span class="pln">acmefw-2.3</span><span class="tag">&lt;/image-name&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln">  </span><span class="tag">&lt;/activate-software-image&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/rpc&gt;</span></code></li><li class="L6"><code class="language-xml"></code></li><li class="L7"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;rpc-reply</span><span class="pln"> </span><span class="atn">message-id</span><span class="pun">=</span><span class="atv">"101"</span></code></li><li class="L8"><code class="language-xml"><span class="pln">            </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"urn:ietf:params:xml:ns:netconf:base:1.0"</span><span class="tag">&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;status</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://acme.example.com/system"</span><span class="tag">&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="pln">     The image acmefw-2.3 is being installed.</span></code></li><li class="L1"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;/status&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/rpc-reply&gt;</span></code></li></ol></pre><ul data-anchor-id="vjb4">
<li>notification定义和NETCONF适配。YANG的数据定义声明被用来为notification的内容建模。</li>
</ul><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="pqwm"><ol class="linenums"><li class="L0"><code><span class="pln"> notification link</span><span class="pun">-</span><span class="pln">failure </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">     description </span><span class="str">"A link failure has been detected"</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">     leaf </span><span class="kwd">if</span><span class="pun">-</span><span class="pln">name </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">         type leafref </span><span class="pun">{</span></code></li><li class="L4"><code><span class="pln">             path </span><span class="str">"/interface/name"</span><span class="pun">;</span></code></li><li class="L5"><code><span class="pln">         </span><span class="pun">}</span></code></li><li class="L6"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pln">     leaf </span><span class="kwd">if</span><span class="pun">-</span><span class="pln">admin</span><span class="pun">-</span><span class="pln">status </span><span class="pun">{</span></code></li><li class="L8"><code><span class="pln">         type admin</span><span class="pun">-</span><span class="pln">status</span><span class="pun">;</span></code></li><li class="L9"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L0"><code><span class="pln">     leaf </span><span class="kwd">if</span><span class="pun">-</span><span class="pln">oper</span><span class="pun">-</span><span class="pln">status </span><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">         type oper</span><span class="pun">-</span><span class="pln">status</span><span class="pun">;</span></code></li><li class="L2"><code><span class="pln">     </span><span class="pun">}</span></code></li><li class="L3"><code><span class="pln"> </span><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="owoj"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;notification</span></code></li><li class="L1"><code class="language-xml"><span class="pln">     </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"urn:ietf:params:netconf:capability:notification:1.0"</span><span class="tag">&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;eventTime&gt;</span><span class="pln">2007-09-01T10:00:00Z</span><span class="tag">&lt;/eventTime&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;link-failure</span><span class="pln"> </span><span class="atn">xmlns</span><span class="pun">=</span><span class="atv">"http://acme.example.com/system"</span><span class="tag">&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;if-name&gt;</span><span class="pln">so-1/2/3.0</span><span class="tag">&lt;/if-name&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;if-admin-status&gt;</span><span class="pln">up</span><span class="tag">&lt;/if-admin-status&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="pln">     </span><span class="tag">&lt;if-oper-status&gt;</span><span class="pln">down</span><span class="tag">&lt;/if-oper-status&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="pln">   </span><span class="tag">&lt;/link-failure&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="pln"> </span><span class="tag">&lt;/notification&gt;</span></code></li></ol></pre><p data-anchor-id="x7z5">4、文件名称应该为：module-or-submodule-name ['@' revision-date] ( '.yang' / '.yin' ) <br>
container中presence声明，存在即为data tree；不存在为配置树。</p></div>
</body>
</html>